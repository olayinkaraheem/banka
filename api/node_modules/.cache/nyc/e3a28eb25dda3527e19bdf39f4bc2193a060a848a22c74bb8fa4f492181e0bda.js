"use strict";var cov_1zxbjo9x56=function(){var path="C:\\Users\\Olayinka\\ADC\\banka\\api\\dist\\services\\user.service.js";var hash="d2e2f5e25beb824759e00c3096a67d293a8b493f";var Function=function(){}.constructor;var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Olayinka\\ADC\\banka\\api\\dist\\services\\user.service.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:28}},"2":{start:{line:8,column:13},end:{line:8,column:38}},"3":{start:{line:10,column:15},end:{line:10,column:44}},"4":{start:{line:13,column:2},end:{line:26,column:3}},"5":{start:{line:13,column:15},end:{line:13,column:16}},"6":{start:{line:14,column:17},end:{line:14,column:57}},"7":{start:{line:15,column:18},end:{line:15,column:37}},"8":{start:{line:17,column:4},end:{line:21,column:5}},"9":{start:{line:18,column:6},end:{line:20,column:10}},"10":{start:{line:19,column:8},end:{line:19,column:71}},"11":{start:{line:23,column:4},end:{line:25,column:7}},"12":{start:{line:24,column:6},end:{line:24,column:48}},"13":{start:{line:28,column:2},end:{line:28,column:16}},"14":{start:{line:32,column:2},end:{line:41,column:3}},"15":{start:{line:33,column:4},end:{line:38,column:7}},"16":{start:{line:40,column:4},end:{line:40,column:21}},"17":{start:{line:43,column:2},end:{line:43,column:13}},"18":{start:{line:47,column:2},end:{line:49,column:3}},"19":{start:{line:48,column:4},end:{line:48,column:61}},"20":{start:{line:53,column:2},end:{line:59,column:3}},"21":{start:{line:53,column:15},end:{line:53,column:16}},"22":{start:{line:54,column:21},end:{line:54,column:29}},"23":{start:{line:55,column:4},end:{line:55,column:59}},"24":{start:{line:56,column:4},end:{line:56,column:35}},"25":{start:{line:57,column:4},end:{line:57,column:58}},"26":{start:{line:57,column:31},end:{line:57,column:58}},"27":{start:{line:58,column:4},end:{line:58,column:62}},"28":{start:{line:63,column:2},end:{line:63,column:71}},"29":{start:{line:63,column:18},end:{line:63,column:71}},"30":{start:{line:64,column:2},end:{line:64,column:63}},"31":{start:{line:64,column:19},end:{line:64,column:63}},"32":{start:{line:65,column:2},end:{line:65,column:21}},"33":{start:{line:75,column:0},end:{line:200,column:3}},"34":{start:{line:81,column:4},end:{line:81,column:39}},"35":{start:{line:83,column:4},end:{line:83,column:30}},"36":{start:{line:92,column:2},end:{line:197,column:6}},"37":{start:{line:95,column:6},end:{line:95,column:24}},"38":{start:{line:107,column:21},end:{line:107,column:39}},"39":{start:{line:108,column:18},end:{line:108,column:55}},"40":{start:{line:109,column:25},end:{line:109,column:76}},"41":{start:{line:110,column:18},end:{line:110,column:47}},"42":{start:{line:112,column:6},end:{line:128,column:7}},"43":{start:{line:113,column:8},end:{line:117,column:10}},"44":{start:{line:119,column:8},end:{line:127,column:10}},"45":{start:{line:139,column:21},end:{line:139,column:39}},"46":{start:{line:140,column:25},end:{line:140,column:76}},"47":{start:{line:142,column:6},end:{line:167,column:7}},"48":{start:{line:143,column:8},end:{line:147,column:10}},"49":{start:{line:149,column:24},end:{line:151,column:10}},"50":{start:{line:150,column:10},end:{line:150,column:84}},"51":{start:{line:153,column:8},end:{line:166,column:9}},"52":{start:{line:154,column:10},end:{line:159,column:12}},"53":{start:{line:161,column:10},end:{line:165,column:12}},"54":{start:{line:178,column:21},end:{line:180,column:8}},"55":{start:{line:179,column:8},end:{line:179,column:34}},"56":{start:{line:182,column:6},end:{line:195,column:7}},"57":{start:{line:183,column:8},end:{line:187,column:10}},"58":{start:{line:189,column:8},end:{line:194,column:10}},"59":{start:{line:199,column:2},end:{line:199,column:21}},"60":{start:{line:202,column:0},end:{line:202,column:33}}},fnMap:{"0":{name:"_objectSpread",decl:{start:{line:12,column:9},end:{line:12,column:22}},loc:{start:{line:12,column:31},end:{line:29,column:1}},line:12},"1":{name:"(anonymous_1)",decl:{start:{line:18,column:75},end:{line:18,column:76}},loc:{start:{line:18,column:90},end:{line:20,column:7}},line:18},"2":{name:"(anonymous_2)",decl:{start:{line:23,column:20},end:{line:23,column:21}},loc:{start:{line:23,column:35},end:{line:25,column:5}},line:23},"3":{name:"_defineProperty",decl:{start:{line:31,column:9},end:{line:31,column:24}},loc:{start:{line:31,column:42},end:{line:44,column:1}},line:31},"4":{name:"_classCallCheck",decl:{start:{line:46,column:9},end:{line:46,column:24}},loc:{start:{line:46,column:48},end:{line:50,column:1}},line:46},"5":{name:"_defineProperties",decl:{start:{line:52,column:9},end:{line:52,column:26}},loc:{start:{line:52,column:42},end:{line:60,column:1}},line:52},"6":{name:"_createClass",decl:{start:{line:62,column:9},end:{line:62,column:21}},loc:{start:{line:62,column:60},end:{line:66,column:1}},line:62},"7":{name:"(anonymous_7)",decl:{start:{line:75,column:0},end:{line:75,column:1}},loc:{start:{line:75,column:12},end:{line:200,column:1}},line:75},"8":{name:"UserService",decl:{start:{line:80,column:11},end:{line:80,column:22}},loc:{start:{line:80,column:25},end:{line:84,column:3}},line:80},"9":{name:"getAllUsers",decl:{start:{line:94,column:20},end:{line:94,column:31}},loc:{start:{line:94,column:34},end:{line:96,column:5}},line:94},"10":{name:"addUser",decl:{start:{line:105,column:20},end:{line:105,column:27}},loc:{start:{line:105,column:34},end:{line:129,column:5}},line:105},"11":{name:"loginUser",decl:{start:{line:138,column:20},end:{line:138,column:29}},loc:{start:{line:138,column:36},end:{line:168,column:5}},line:138},"12":{name:"(anonymous_12)",decl:{start:{line:149,column:40},end:{line:149,column:41}},loc:{start:{line:149,column:59},end:{line:151,column:9}},line:149},"13":{name:"getUserInfo",decl:{start:{line:177,column:20},end:{line:177,column:31}},loc:{start:{line:177,column:40},end:{line:196,column:5}},line:177},"14":{name:"(anonymous_14)",decl:{start:{line:178,column:47},end:{line:178,column:48}},loc:{start:{line:178,column:63},end:{line:180,column:7}},line:178}},branchMap:{"0":{loc:{start:{line:14,column:17},end:{line:14,column:57}},type:"cond-expr",locations:[{start:{line:14,column:40},end:{line:14,column:52}},{start:{line:14,column:55},end:{line:14,column:57}}],line:14},"1":{loc:{start:{line:17,column:4},end:{line:21,column:5}},type:"if",locations:[{start:{line:17,column:4},end:{line:21,column:5}},{start:{line:17,column:4},end:{line:21,column:5}}],line:17},"2":{loc:{start:{line:32,column:2},end:{line:41,column:3}},type:"if",locations:[{start:{line:32,column:2},end:{line:41,column:3}},{start:{line:32,column:2},end:{line:41,column:3}}],line:32},"3":{loc:{start:{line:47,column:2},end:{line:49,column:3}},type:"if",locations:[{start:{line:47,column:2},end:{line:49,column:3}},{start:{line:47,column:2},end:{line:49,column:3}}],line:47},"4":{loc:{start:{line:55,column:28},end:{line:55,column:58}},type:"binary-expr",locations:[{start:{line:55,column:28},end:{line:55,column:49}},{start:{line:55,column:53},end:{line:55,column:58}}],line:55},"5":{loc:{start:{line:57,column:4},end:{line:57,column:58}},type:"if",locations:[{start:{line:57,column:4},end:{line:57,column:58}},{start:{line:57,column:4},end:{line:57,column:58}}],line:57},"6":{loc:{start:{line:63,column:2},end:{line:63,column:71}},type:"if",locations:[{start:{line:63,column:2},end:{line:63,column:71}},{start:{line:63,column:2},end:{line:63,column:71}}],line:63},"7":{loc:{start:{line:64,column:2},end:{line:64,column:63}},type:"if",locations:[{start:{line:64,column:2},end:{line:64,column:63}},{start:{line:64,column:2},end:{line:64,column:63}}],line:64},"8":{loc:{start:{line:112,column:6},end:{line:128,column:7}},type:"if",locations:[{start:{line:112,column:6},end:{line:128,column:7}},{start:{line:112,column:6},end:{line:128,column:7}}],line:112},"9":{loc:{start:{line:142,column:6},end:{line:167,column:7}},type:"if",locations:[{start:{line:142,column:6},end:{line:167,column:7}},{start:{line:142,column:6},end:{line:167,column:7}}],line:142},"10":{loc:{start:{line:150,column:17},end:{line:150,column:83}},type:"binary-expr",locations:[{start:{line:150,column:17},end:{line:150,column:51}},{start:{line:150,column:55},end:{line:150,column:83}}],line:150},"11":{loc:{start:{line:153,column:8},end:{line:166,column:9}},type:"if",locations:[{start:{line:153,column:8},end:{line:166,column:9}},{start:{line:153,column:8},end:{line:166,column:9}}],line:153},"12":{loc:{start:{line:182,column:6},end:{line:195,column:7}},type:"if",locations:[{start:{line:182,column:6},end:{line:195,column:7}},{start:{line:182,column:6},end:{line:195,column:7}}],line:182}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_1zxbjo9x56.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_1zxbjo9x56.s[1]++;exports["default"]=void 0;var _users=(cov_1zxbjo9x56.s[2]++,require("../.data/users"));var _helpers=(cov_1zxbjo9x56.s[3]++,require("../Helpers/helpers"));function _objectSpread(target){cov_1zxbjo9x56.f[0]++;cov_1zxbjo9x56.s[4]++;for(var i=(cov_1zxbjo9x56.s[5]++,1);i<arguments.length;i++){var source=(cov_1zxbjo9x56.s[6]++,arguments[i]!=null?(cov_1zxbjo9x56.b[0][0]++,arguments[i]):(cov_1zxbjo9x56.b[0][1]++,{}));var ownKeys=(cov_1zxbjo9x56.s[7]++,Object.keys(source));cov_1zxbjo9x56.s[8]++;if(typeof Object.getOwnPropertySymbols==='function'){cov_1zxbjo9x56.b[1][0]++;cov_1zxbjo9x56.s[9]++;ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){cov_1zxbjo9x56.f[1]++;cov_1zxbjo9x56.s[10]++;return Object.getOwnPropertyDescriptor(source,sym).enumerable;}));}else{cov_1zxbjo9x56.b[1][1]++;}cov_1zxbjo9x56.s[11]++;ownKeys.forEach(function(key){cov_1zxbjo9x56.f[2]++;cov_1zxbjo9x56.s[12]++;_defineProperty(target,key,source[key]);});}cov_1zxbjo9x56.s[13]++;return target;}function _defineProperty(obj,key,value){cov_1zxbjo9x56.f[3]++;cov_1zxbjo9x56.s[14]++;if(key in obj){cov_1zxbjo9x56.b[2][0]++;cov_1zxbjo9x56.s[15]++;Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{cov_1zxbjo9x56.b[2][1]++;cov_1zxbjo9x56.s[16]++;obj[key]=value;}cov_1zxbjo9x56.s[17]++;return obj;}function _classCallCheck(instance,Constructor){cov_1zxbjo9x56.f[4]++;cov_1zxbjo9x56.s[18]++;if(!(instance instanceof Constructor)){cov_1zxbjo9x56.b[3][0]++;cov_1zxbjo9x56.s[19]++;throw new TypeError("Cannot call a class as a function");}else{cov_1zxbjo9x56.b[3][1]++;}}function _defineProperties(target,props){cov_1zxbjo9x56.f[5]++;cov_1zxbjo9x56.s[20]++;for(var i=(cov_1zxbjo9x56.s[21]++,0);i<props.length;i++){var descriptor=(cov_1zxbjo9x56.s[22]++,props[i]);cov_1zxbjo9x56.s[23]++;descriptor.enumerable=(cov_1zxbjo9x56.b[4][0]++,descriptor.enumerable)||(cov_1zxbjo9x56.b[4][1]++,false);cov_1zxbjo9x56.s[24]++;descriptor.configurable=true;cov_1zxbjo9x56.s[25]++;if("value"in descriptor){cov_1zxbjo9x56.b[5][0]++;cov_1zxbjo9x56.s[26]++;descriptor.writable=true;}else{cov_1zxbjo9x56.b[5][1]++;}cov_1zxbjo9x56.s[27]++;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){cov_1zxbjo9x56.f[6]++;cov_1zxbjo9x56.s[28]++;if(protoProps){cov_1zxbjo9x56.b[6][0]++;cov_1zxbjo9x56.s[29]++;_defineProperties(Constructor.prototype,protoProps);}else{cov_1zxbjo9x56.b[6][1]++;}cov_1zxbjo9x56.s[30]++;if(staticProps){cov_1zxbjo9x56.b[7][0]++;cov_1zxbjo9x56.s[31]++;_defineProperties(Constructor,staticProps);}else{cov_1zxbjo9x56.b[7][1]++;}cov_1zxbjo9x56.s[32]++;return Constructor;}/**
 * @exports
 * @class UserService
 */var UserService=(/*#__PURE__*/cov_1zxbjo9x56.s[33]++,function(){cov_1zxbjo9x56.f[7]++;/**
   * Creates an instance of UserService.
   * @memberof User
   */function UserService(){cov_1zxbjo9x56.f[8]++;cov_1zxbjo9x56.s[34]++;_classCallCheck(this,UserService);cov_1zxbjo9x56.s[35]++;this.users=_users.users;}/**
   * Get all user resources.
   * @param null
   * @returns {object}
   */cov_1zxbjo9x56.s[36]++;_createClass(UserService,[{key:"getAllUsers",value:function getAllUsers(){cov_1zxbjo9x56.f[9]++;cov_1zxbjo9x56.s[37]++;return this.users;}/**
     * Creates a new user.
     * @param {object} user
     * @returns {object}
     */},{key:"addUser",value:function addUser(user){cov_1zxbjo9x56.f[10]++;// const new_user = new User({ ...user });
var allUsers=(cov_1zxbjo9x56.s[38]++,this.getAllUsers());var newId=(cov_1zxbjo9x56.s[39]++,(0,_helpers.getLastId)(allUsers)+1);var email_exists=(cov_1zxbjo9x56.s[40]++,(0,_helpers.recordExists)(allUsers,user,'email'));var token=(cov_1zxbjo9x56.s[41]++,(0,_helpers.generateToken)());cov_1zxbjo9x56.s[42]++;if(email_exists){cov_1zxbjo9x56.b[8][0]++;cov_1zxbjo9x56.s[43]++;return{message:'Email already exist',error:true,code:401};}else{cov_1zxbjo9x56.b[8][1]++;cov_1zxbjo9x56.s[44]++;return{message:'Signup successful',error:false,code:201,data:_objectSpread({token:token,id:newId},user)};}}/**
     * Logs in a user.
     * @param {object} user
     * @returns {object}
     */},{key:"loginUser",value:function loginUser(user){cov_1zxbjo9x56.f[11]++;var allUsers=(cov_1zxbjo9x56.s[45]++,this.getAllUsers());var email_exists=(cov_1zxbjo9x56.s[46]++,(0,_helpers.recordExists)(allUsers,user,'email'));// const token = generateToken();
cov_1zxbjo9x56.s[47]++;if(!email_exists){cov_1zxbjo9x56.b[9][0]++;cov_1zxbjo9x56.s[48]++;return{message:'Users With This Email Does Not exist',error:true,code:404};}else{cov_1zxbjo9x56.b[9][1]++;var validUser=(cov_1zxbjo9x56.s[49]++,allUsers.filter(function(db_user){cov_1zxbjo9x56.f[12]++;cov_1zxbjo9x56.s[50]++;return(cov_1zxbjo9x56.b[10][0]++,user.password===db_user.password)&&(cov_1zxbjo9x56.b[10][1]++,user.email===db_user.email);}));cov_1zxbjo9x56.s[51]++;if(validUser.length){cov_1zxbjo9x56.b[11][0]++;cov_1zxbjo9x56.s[52]++;return{message:'Login successful',error:false,code:200,data:_objectSpread({},validUser[0])};}else{cov_1zxbjo9x56.b[11][1]++;cov_1zxbjo9x56.s[53]++;return{message:'Login Failed. Please enter a valid password',error:true,code:401};}}}/**
     * Gets user information.
     * @param {number} userId
     * @returns {object}
     */},{key:"getUserInfo",value:function getUserInfo(userId){cov_1zxbjo9x56.f[13]++;var userInfo=(cov_1zxbjo9x56.s[54]++,this.getAllUsers().filter(function(user){cov_1zxbjo9x56.f[14]++;cov_1zxbjo9x56.s[55]++;return user.id===userId;}));cov_1zxbjo9x56.s[56]++;if(!userInfo.length){cov_1zxbjo9x56.b[12][0]++;cov_1zxbjo9x56.s[57]++;return{message:'User information not found',error:true,code:404};}else{cov_1zxbjo9x56.b[12][1]++;cov_1zxbjo9x56.s[58]++;return{message:'User Information Found',error:false,code:200,data:_objectSpread({},userInfo[0])};}}}]);cov_1zxbjo9x56.s[59]++;return UserService;}());cov_1zxbjo9x56.s[60]++;exports["default"]=UserService;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuc2VydmljZS5qcyJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIl91c2VycyIsInJlcXVpcmUiLCJfaGVscGVycyIsIl9vYmplY3RTcHJlYWQiLCJ0YXJnZXQiLCJpIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwic291cmNlIiwib3duS2V5cyIsImtleXMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJjb25jYXQiLCJmaWx0ZXIiLCJzeW0iLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiZm9yRWFjaCIsImtleSIsIl9kZWZpbmVQcm9wZXJ0eSIsIm9iaiIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9kZWZpbmVQcm9wZXJ0aWVzIiwicHJvcHMiLCJkZXNjcmlwdG9yIiwiX2NyZWF0ZUNsYXNzIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiVXNlclNlcnZpY2UiLCJ1c2VycyIsImdldEFsbFVzZXJzIiwiYWRkVXNlciIsInVzZXIiLCJhbGxVc2VycyIsIm5ld0lkIiwiZ2V0TGFzdElkIiwiZW1haWxfZXhpc3RzIiwicmVjb3JkRXhpc3RzIiwidG9rZW4iLCJnZW5lcmF0ZVRva2VuIiwibWVzc2FnZSIsImVycm9yIiwiY29kZSIsImRhdGEiLCJpZCIsImxvZ2luVXNlciIsInZhbGlkVXNlciIsImRiX3VzZXIiLCJwYXNzd29yZCIsImVtYWlsIiwiZ2V0VXNlckluZm8iLCJ1c2VySWQiLCJ1c2VySW5mbyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUFBLE1BQU0sQ0FBQ0MsY0FBUCxDQUFzQkMsT0FBdEIsRUFBK0IsWUFBL0IsRUFBNkM7QUFDM0NDLEVBQUFBLEtBQUssRUFBRTtBQURvQyxDQUE3QztBQUdBRCxPQUFPLENBQUMsU0FBRCxDQUFQ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QUpkLFNBQVA7QUFNRDtBQUNGO0FBckJBLEdBbkZ1QixDQUFkLENBQVo7O0FBMkdBLFNBQU94QixXQUFQO0FBQ0QsQ0E3SEQsRUFGQTs7QUFpSUFwQyxPQUFPLENBQUMsU0FBRCxDQUFQLEdBQXFCb0MsV0FBckIiLCJzb3VyY2VSb290IjoiQzpcXFVzZXJzXFxPbGF5aW5rYVxcQURDXFxiYW5rYVxcYXBpXFxkaXN0XFxzZXJ2aWNlcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSB2b2lkIDA7XG5cbnZhciBfdXNlcnMgPSByZXF1aXJlKFwiLi4vLmRhdGEvdXNlcnNcIik7XG5cbnZhciBfaGVscGVycyA9IHJlcXVpcmUoXCIuLi9IZWxwZXJzL2hlbHBlcnNcIik7XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyB2YXIgb3duS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7IGlmICh0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gJ2Z1bmN0aW9uJykgeyBvd25LZXlzID0gb3duS2V5cy5jb25jYXQoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwgc3ltKS5lbnVtZXJhYmxlOyB9KSk7IH0gb3duS2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG4vKipcbiAqIEBleHBvcnRzXG4gKiBAY2xhc3MgVXNlclNlcnZpY2VcbiAqL1xudmFyIFVzZXJTZXJ2aWNlID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uICgpIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgVXNlclNlcnZpY2UuXG4gICAqIEBtZW1iZXJvZiBVc2VyXG4gICAqL1xuICBmdW5jdGlvbiBVc2VyU2VydmljZSgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVXNlclNlcnZpY2UpO1xuXG4gICAgdGhpcy51c2VycyA9IF91c2Vycy51c2VycztcbiAgfVxuICAvKipcbiAgICogR2V0IGFsbCB1c2VyIHJlc291cmNlcy5cbiAgICogQHBhcmFtIG51bGxcbiAgICogQHJldHVybnMge29iamVjdH1cbiAgICovXG5cblxuICBfY3JlYXRlQ2xhc3MoVXNlclNlcnZpY2UsIFt7XG4gICAga2V5OiBcImdldEFsbFVzZXJzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFsbFVzZXJzKCkge1xuICAgICAgcmV0dXJuIHRoaXMudXNlcnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdXNlci5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gdXNlclxuICAgICAqIEByZXR1cm5zIHtvYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJhZGRVc2VyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFkZFVzZXIodXNlcikge1xuICAgICAgLy8gY29uc3QgbmV3X3VzZXIgPSBuZXcgVXNlcih7IC4uLnVzZXIgfSk7XG4gICAgICB2YXIgYWxsVXNlcnMgPSB0aGlzLmdldEFsbFVzZXJzKCk7XG4gICAgICB2YXIgbmV3SWQgPSAoMCwgX2hlbHBlcnMuZ2V0TGFzdElkKShhbGxVc2VycykgKyAxO1xuICAgICAgdmFyIGVtYWlsX2V4aXN0cyA9ICgwLCBfaGVscGVycy5yZWNvcmRFeGlzdHMpKGFsbFVzZXJzLCB1c2VyLCAnZW1haWwnKTtcbiAgICAgIHZhciB0b2tlbiA9ICgwLCBfaGVscGVycy5nZW5lcmF0ZVRva2VuKSgpO1xuXG4gICAgICBpZiAoZW1haWxfZXhpc3RzKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbWVzc2FnZTogJ0VtYWlsIGFscmVhZHkgZXhpc3QnLFxuICAgICAgICAgIGVycm9yOiB0cnVlLFxuICAgICAgICAgIGNvZGU6IDQwMVxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBtZXNzYWdlOiAnU2lnbnVwIHN1Y2Nlc3NmdWwnLFxuICAgICAgICAgIGVycm9yOiBmYWxzZSxcbiAgICAgICAgICBjb2RlOiAyMDEsXG4gICAgICAgICAgZGF0YTogX29iamVjdFNwcmVhZCh7XG4gICAgICAgICAgICB0b2tlbjogdG9rZW4sXG4gICAgICAgICAgICBpZDogbmV3SWRcbiAgICAgICAgICB9LCB1c2VyKVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2dzIGluIGEgdXNlci5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gdXNlclxuICAgICAqIEByZXR1cm5zIHtvYmplY3R9XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJsb2dpblVzZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbG9naW5Vc2VyKHVzZXIpIHtcbiAgICAgIHZhciBhbGxVc2VycyA9IHRoaXMuZ2V0QWxsVXNlcnMoKTtcbiAgICAgIHZhciBlbWFpbF9leGlzdHMgPSAoMCwgX2hlbHBlcnMucmVjb3JkRXhpc3RzKShhbGxVc2VycywgdXNlciwgJ2VtYWlsJyk7IC8vIGNvbnN0IHRva2VuID0gZ2VuZXJhdGVUb2tlbigpO1xuXG4gICAgICBpZiAoIWVtYWlsX2V4aXN0cykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG1lc3NhZ2U6ICdVc2VycyBXaXRoIFRoaXMgRW1haWwgRG9lcyBOb3QgZXhpc3QnLFxuICAgICAgICAgIGVycm9yOiB0cnVlLFxuICAgICAgICAgIGNvZGU6IDQwNFxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHZhbGlkVXNlciA9IGFsbFVzZXJzLmZpbHRlcihmdW5jdGlvbiAoZGJfdXNlcikge1xuICAgICAgICAgIHJldHVybiB1c2VyLnBhc3N3b3JkID09PSBkYl91c2VyLnBhc3N3b3JkICYmIHVzZXIuZW1haWwgPT09IGRiX3VzZXIuZW1haWw7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh2YWxpZFVzZXIubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdMb2dpbiBzdWNjZXNzZnVsJyxcbiAgICAgICAgICAgIGVycm9yOiBmYWxzZSxcbiAgICAgICAgICAgIGNvZGU6IDIwMCxcbiAgICAgICAgICAgIGRhdGE6IF9vYmplY3RTcHJlYWQoe30sIHZhbGlkVXNlclswXSlcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtZXNzYWdlOiAnTG9naW4gRmFpbGVkLiBQbGVhc2UgZW50ZXIgYSB2YWxpZCBwYXNzd29yZCcsXG4gICAgICAgICAgICBlcnJvcjogdHJ1ZSxcbiAgICAgICAgICAgIGNvZGU6IDQwMVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB1c2VyIGluZm9ybWF0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB1c2VySWRcbiAgICAgKiBAcmV0dXJucyB7b2JqZWN0fVxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0VXNlckluZm9cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VXNlckluZm8odXNlcklkKSB7XG4gICAgICB2YXIgdXNlckluZm8gPSB0aGlzLmdldEFsbFVzZXJzKCkuZmlsdGVyKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHJldHVybiB1c2VyLmlkID09PSB1c2VySWQ7XG4gICAgICB9KTtcblxuICAgICAgaWYgKCF1c2VySW5mby5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBtZXNzYWdlOiAnVXNlciBpbmZvcm1hdGlvbiBub3QgZm91bmQnLFxuICAgICAgICAgIGVycm9yOiB0cnVlLFxuICAgICAgICAgIGNvZGU6IDQwNFxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBtZXNzYWdlOiAnVXNlciBJbmZvcm1hdGlvbiBGb3VuZCcsXG4gICAgICAgICAgZXJyb3I6IGZhbHNlLFxuICAgICAgICAgIGNvZGU6IDIwMCxcbiAgICAgICAgICBkYXRhOiBfb2JqZWN0U3ByZWFkKHt9LCB1c2VySW5mb1swXSlcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gVXNlclNlcnZpY2U7XG59KCk7XG5cbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gVXNlclNlcnZpY2U7Il19