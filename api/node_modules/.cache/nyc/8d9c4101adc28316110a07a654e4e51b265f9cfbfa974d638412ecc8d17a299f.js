"use strict";var cov_1vhu4pi89k=function(){var path="C:\\Users\\Olayinka\\ADC\\banka\\api\\src\\services\\user.service.js";var hash="e751f1b19872330bee9d9d3a6c903980fff364fa";var Function=function(){}.constructor;var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Olayinka\\ADC\\banka\\api\\src\\services\\user.service.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:28}},"2":{start:{line:8,column:13},end:{line:8,column:38}},"3":{start:{line:10,column:15},end:{line:10,column:44}},"4":{start:{line:12,column:33},end:{line:12,column:464}},"5":{start:{line:12,column:46},end:{line:12,column:47}},"6":{start:{line:12,column:91},end:{line:12,column:131}},"7":{start:{line:12,column:147},end:{line:12,column:166}},"8":{start:{line:12,column:168},end:{line:12,column:382}},"9":{start:{line:12,column:226},end:{line:12,column:380}},"10":{start:{line:12,column:312},end:{line:12,column:375}},"11":{start:{line:12,column:383},end:{line:12,column:462}},"12":{start:{line:12,column:416},end:{line:12,column:458}},"13":{start:{line:12,column:465},end:{line:12,column:479}},"14":{start:{line:14,column:44},end:{line:14,column:195}},"15":{start:{line:14,column:62},end:{line:14,column:166}},"16":{start:{line:14,column:176},end:{line:14,column:193}},"17":{start:{line:14,column:196},end:{line:14,column:207}},"18":{start:{line:16,column:50},end:{line:16,column:151}},"19":{start:{line:16,column:92},end:{line:16,column:149}},"20":{start:{line:18,column:44},end:{line:18,column:315}},"21":{start:{line:18,column:57},end:{line:18,column:58}},"22":{start:{line:18,column:102},end:{line:18,column:110}},"23":{start:{line:18,column:112},end:{line:18,column:167}},"24":{start:{line:18,column:168},end:{line:18,column:199}},"25":{start:{line:18,column:200},end:{line:18,column:254}},"26":{start:{line:18,column:227},end:{line:18,column:254}},"27":{start:{line:18,column:255},end:{line:18,column:313}},"28":{start:{line:20,column:62},end:{line:20,column:131}},"29":{start:{line:20,column:78},end:{line:20,column:131}},"30":{start:{line:20,column:132},end:{line:20,column:193}},"31":{start:{line:20,column:149},end:{line:20,column:193}},"32":{start:{line:20,column:194},end:{line:20,column:213}},"33":{start:{line:28,column:0},end:{line:153,column:3}},"34":{start:{line:34,column:4},end:{line:34,column:39}},"35":{start:{line:36,column:4},end:{line:36,column:30}},"36":{start:{line:45,column:2},end:{line:150,column:6}},"37":{start:{line:48,column:6},end:{line:48,column:24}},"38":{start:{line:60,column:21},end:{line:60,column:39}},"39":{start:{line:61,column:18},end:{line:61,column:55}},"40":{start:{line:62,column:25},end:{line:62,column:76}},"41":{start:{line:63,column:18},end:{line:63,column:47}},"42":{start:{line:65,column:6},end:{line:81,column:7}},"43":{start:{line:66,column:8},end:{line:70,column:10}},"44":{start:{line:72,column:8},end:{line:80,column:10}},"45":{start:{line:92,column:21},end:{line:92,column:39}},"46":{start:{line:93,column:25},end:{line:93,column:76}},"47":{start:{line:95,column:6},end:{line:120,column:7}},"48":{start:{line:96,column:8},end:{line:100,column:10}},"49":{start:{line:102,column:24},end:{line:104,column:10}},"50":{start:{line:103,column:10},end:{line:103,column:84}},"51":{start:{line:106,column:8},end:{line:119,column:9}},"52":{start:{line:107,column:10},end:{line:112,column:12}},"53":{start:{line:114,column:10},end:{line:118,column:12}},"54":{start:{line:131,column:21},end:{line:133,column:8}},"55":{start:{line:132,column:8},end:{line:132,column:34}},"56":{start:{line:135,column:6},end:{line:148,column:7}},"57":{start:{line:136,column:8},end:{line:140,column:10}},"58":{start:{line:142,column:8},end:{line:147,column:10}},"59":{start:{line:152,column:2},end:{line:152,column:21}},"60":{start:{line:155,column:0},end:{line:155,column:33}}},fnMap:{"0":{name:"_objectSpread",decl:{start:{line:12,column:9},end:{line:12,column:22}},loc:{start:{line:12,column:31},end:{line:12,column:481}},line:12},"1":{name:"(anonymous_1)",decl:{start:{line:12,column:295},end:{line:12,column:296}},loc:{start:{line:12,column:310},end:{line:12,column:377}},line:12},"2":{name:"(anonymous_2)",decl:{start:{line:12,column:399},end:{line:12,column:400}},loc:{start:{line:12,column:414},end:{line:12,column:460}},line:12},"3":{name:"_defineProperty",decl:{start:{line:14,column:9},end:{line:14,column:24}},loc:{start:{line:14,column:42},end:{line:14,column:209}},line:14},"4":{name:"_classCallCheck",decl:{start:{line:16,column:9},end:{line:16,column:24}},loc:{start:{line:16,column:48},end:{line:16,column:153}},line:16},"5":{name:"_defineProperties",decl:{start:{line:18,column:9},end:{line:18,column:26}},loc:{start:{line:18,column:42},end:{line:18,column:317}},line:18},"6":{name:"_createClass",decl:{start:{line:20,column:9},end:{line:20,column:21}},loc:{start:{line:20,column:60},end:{line:20,column:215}},line:20},"7":{name:"(anonymous_7)",decl:{start:{line:28,column:0},end:{line:28,column:1}},loc:{start:{line:28,column:12},end:{line:153,column:1}},line:28},"8":{name:"UserService",decl:{start:{line:33,column:11},end:{line:33,column:22}},loc:{start:{line:33,column:25},end:{line:37,column:3}},line:33},"9":{name:"getAllUsers",decl:{start:{line:47,column:20},end:{line:47,column:31}},loc:{start:{line:47,column:34},end:{line:49,column:5}},line:47},"10":{name:"addUser",decl:{start:{line:58,column:20},end:{line:58,column:27}},loc:{start:{line:58,column:34},end:{line:82,column:5}},line:58},"11":{name:"loginUser",decl:{start:{line:91,column:20},end:{line:91,column:29}},loc:{start:{line:91,column:36},end:{line:121,column:5}},line:91},"12":{name:"(anonymous_12)",decl:{start:{line:102,column:40},end:{line:102,column:41}},loc:{start:{line:102,column:59},end:{line:104,column:9}},line:102},"13":{name:"getUserInfo",decl:{start:{line:130,column:20},end:{line:130,column:31}},loc:{start:{line:130,column:40},end:{line:149,column:5}},line:130},"14":{name:"(anonymous_14)",decl:{start:{line:131,column:47},end:{line:131,column:48}},loc:{start:{line:131,column:63},end:{line:133,column:7}},line:131}},branchMap:{"0":{loc:{start:{line:12,column:91},end:{line:12,column:131}},type:"cond-expr",locations:[{start:{line:12,column:114},end:{line:12,column:126}},{start:{line:12,column:129},end:{line:12,column:131}}],line:12},"1":{loc:{start:{line:12,column:168},end:{line:12,column:382}},type:"if",locations:[{start:{line:12,column:168},end:{line:12,column:382}},{start:{line:12,column:168},end:{line:12,column:382}}],line:12},"2":{loc:{start:{line:14,column:44},end:{line:14,column:195}},type:"if",locations:[{start:{line:14,column:44},end:{line:14,column:195}},{start:{line:14,column:44},end:{line:14,column:195}}],line:14},"3":{loc:{start:{line:16,column:50},end:{line:16,column:151}},type:"if",locations:[{start:{line:16,column:50},end:{line:16,column:151}},{start:{line:16,column:50},end:{line:16,column:151}}],line:16},"4":{loc:{start:{line:18,column:136},end:{line:18,column:166}},type:"binary-expr",locations:[{start:{line:18,column:136},end:{line:18,column:157}},{start:{line:18,column:161},end:{line:18,column:166}}],line:18},"5":{loc:{start:{line:18,column:200},end:{line:18,column:254}},type:"if",locations:[{start:{line:18,column:200},end:{line:18,column:254}},{start:{line:18,column:200},end:{line:18,column:254}}],line:18},"6":{loc:{start:{line:20,column:62},end:{line:20,column:131}},type:"if",locations:[{start:{line:20,column:62},end:{line:20,column:131}},{start:{line:20,column:62},end:{line:20,column:131}}],line:20},"7":{loc:{start:{line:20,column:132},end:{line:20,column:193}},type:"if",locations:[{start:{line:20,column:132},end:{line:20,column:193}},{start:{line:20,column:132},end:{line:20,column:193}}],line:20},"8":{loc:{start:{line:65,column:6},end:{line:81,column:7}},type:"if",locations:[{start:{line:65,column:6},end:{line:81,column:7}},{start:{line:65,column:6},end:{line:81,column:7}}],line:65},"9":{loc:{start:{line:95,column:6},end:{line:120,column:7}},type:"if",locations:[{start:{line:95,column:6},end:{line:120,column:7}},{start:{line:95,column:6},end:{line:120,column:7}}],line:95},"10":{loc:{start:{line:103,column:17},end:{line:103,column:83}},type:"binary-expr",locations:[{start:{line:103,column:17},end:{line:103,column:51}},{start:{line:103,column:55},end:{line:103,column:83}}],line:103},"11":{loc:{start:{line:106,column:8},end:{line:119,column:9}},type:"if",locations:[{start:{line:106,column:8},end:{line:119,column:9}},{start:{line:106,column:8},end:{line:119,column:9}}],line:106},"12":{loc:{start:{line:135,column:6},end:{line:148,column:7}},type:"if",locations:[{start:{line:135,column:6},end:{line:148,column:7}},{start:{line:135,column:6},end:{line:148,column:7}}],line:135}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_1vhu4pi89k.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_1vhu4pi89k.s[1]++;exports["default"]=void 0;var _users=(cov_1vhu4pi89k.s[2]++,require("../.data/users"));var _helpers=(cov_1vhu4pi89k.s[3]++,require("../Helpers/helpers"));function _objectSpread(target){cov_1vhu4pi89k.f[0]++;cov_1vhu4pi89k.s[4]++;for(var i=(cov_1vhu4pi89k.s[5]++,1);i<arguments.length;i++){var source=(cov_1vhu4pi89k.s[6]++,arguments[i]!=null?(cov_1vhu4pi89k.b[0][0]++,arguments[i]):(cov_1vhu4pi89k.b[0][1]++,{}));var ownKeys=(cov_1vhu4pi89k.s[7]++,Object.keys(source));cov_1vhu4pi89k.s[8]++;if(typeof Object.getOwnPropertySymbols==='function'){cov_1vhu4pi89k.b[1][0]++;cov_1vhu4pi89k.s[9]++;ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){cov_1vhu4pi89k.f[1]++;cov_1vhu4pi89k.s[10]++;return Object.getOwnPropertyDescriptor(source,sym).enumerable;}));}else{cov_1vhu4pi89k.b[1][1]++;}cov_1vhu4pi89k.s[11]++;ownKeys.forEach(function(key){cov_1vhu4pi89k.f[2]++;cov_1vhu4pi89k.s[12]++;_defineProperty(target,key,source[key]);});}cov_1vhu4pi89k.s[13]++;return target;}function _defineProperty(obj,key,value){cov_1vhu4pi89k.f[3]++;cov_1vhu4pi89k.s[14]++;if(key in obj){cov_1vhu4pi89k.b[2][0]++;cov_1vhu4pi89k.s[15]++;Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{cov_1vhu4pi89k.b[2][1]++;cov_1vhu4pi89k.s[16]++;obj[key]=value;}cov_1vhu4pi89k.s[17]++;return obj;}function _classCallCheck(instance,Constructor){cov_1vhu4pi89k.f[4]++;cov_1vhu4pi89k.s[18]++;if(!(instance instanceof Constructor)){cov_1vhu4pi89k.b[3][0]++;cov_1vhu4pi89k.s[19]++;throw new TypeError("Cannot call a class as a function");}else{cov_1vhu4pi89k.b[3][1]++;}}function _defineProperties(target,props){cov_1vhu4pi89k.f[5]++;cov_1vhu4pi89k.s[20]++;for(var i=(cov_1vhu4pi89k.s[21]++,0);i<props.length;i++){var descriptor=(cov_1vhu4pi89k.s[22]++,props[i]);cov_1vhu4pi89k.s[23]++;descriptor.enumerable=(cov_1vhu4pi89k.b[4][0]++,descriptor.enumerable)||(cov_1vhu4pi89k.b[4][1]++,false);cov_1vhu4pi89k.s[24]++;descriptor.configurable=true;cov_1vhu4pi89k.s[25]++;if("value"in descriptor){cov_1vhu4pi89k.b[5][0]++;cov_1vhu4pi89k.s[26]++;descriptor.writable=true;}else{cov_1vhu4pi89k.b[5][1]++;}cov_1vhu4pi89k.s[27]++;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){cov_1vhu4pi89k.f[6]++;cov_1vhu4pi89k.s[28]++;if(protoProps){cov_1vhu4pi89k.b[6][0]++;cov_1vhu4pi89k.s[29]++;_defineProperties(Constructor.prototype,protoProps);}else{cov_1vhu4pi89k.b[6][1]++;}cov_1vhu4pi89k.s[30]++;if(staticProps){cov_1vhu4pi89k.b[7][0]++;cov_1vhu4pi89k.s[31]++;_defineProperties(Constructor,staticProps);}else{cov_1vhu4pi89k.b[7][1]++;}cov_1vhu4pi89k.s[32]++;return Constructor;}/**
 * @exports
 * @class UserService
 */var UserService=(/*#__PURE__*/cov_1vhu4pi89k.s[33]++,function(){cov_1vhu4pi89k.f[7]++;/**
   * Creates an instance of UserService.
   * @memberof User
   */function UserService(){cov_1vhu4pi89k.f[8]++;cov_1vhu4pi89k.s[34]++;_classCallCheck(this,UserService);cov_1vhu4pi89k.s[35]++;this.users=_users.users;}/**
   * Get all user resources.
   * @param null
   * @returns {object}
   */cov_1vhu4pi89k.s[36]++;_createClass(UserService,[{key:"getAllUsers",value:function getAllUsers(){cov_1vhu4pi89k.f[9]++;cov_1vhu4pi89k.s[37]++;return this.users;}/**
     * Creates a new user.
     * @param {object} user
     * @returns {object}
     */},{key:"addUser",value:function addUser(user){cov_1vhu4pi89k.f[10]++;// const new_user = new User({ ...user });
var allUsers=(cov_1vhu4pi89k.s[38]++,this.getAllUsers());var newId=(cov_1vhu4pi89k.s[39]++,(0,_helpers.getLastId)(allUsers)+1);var email_exists=(cov_1vhu4pi89k.s[40]++,(0,_helpers.recordExists)(allUsers,user,'email'));var token=(cov_1vhu4pi89k.s[41]++,(0,_helpers.generateToken)());cov_1vhu4pi89k.s[42]++;if(email_exists){cov_1vhu4pi89k.b[8][0]++;cov_1vhu4pi89k.s[43]++;return{message:'Email already exist',error:true,code:401};}else{cov_1vhu4pi89k.b[8][1]++;cov_1vhu4pi89k.s[44]++;return{message:'Signup successful',error:false,code:201,data:_objectSpread({token:token,id:newId},user)};}}/**
     * Logs in a user.
     * @param {object} user
     * @returns {object}
     */},{key:"loginUser",value:function loginUser(user){cov_1vhu4pi89k.f[11]++;var allUsers=(cov_1vhu4pi89k.s[45]++,this.getAllUsers());var email_exists=(cov_1vhu4pi89k.s[46]++,(0,_helpers.recordExists)(allUsers,user,'email'));// const token = generateToken();
cov_1vhu4pi89k.s[47]++;if(!email_exists){cov_1vhu4pi89k.b[9][0]++;cov_1vhu4pi89k.s[48]++;return{message:'Users With This Email Does Not exist',error:true,code:404};}else{cov_1vhu4pi89k.b[9][1]++;var validUser=(cov_1vhu4pi89k.s[49]++,allUsers.filter(function(db_user){cov_1vhu4pi89k.f[12]++;cov_1vhu4pi89k.s[50]++;return(cov_1vhu4pi89k.b[10][0]++,user.password===db_user.password)&&(cov_1vhu4pi89k.b[10][1]++,user.email===db_user.email);}));cov_1vhu4pi89k.s[51]++;if(validUser.length){cov_1vhu4pi89k.b[11][0]++;cov_1vhu4pi89k.s[52]++;return{message:'Login successful',error:false,code:200,data:_objectSpread({},validUser[0])};}else{cov_1vhu4pi89k.b[11][1]++;cov_1vhu4pi89k.s[53]++;return{message:'Login Failed. Please enter a valid password',error:true,code:401};}}}/**
     * Gets user information.
     * @param {number} userId
     * @returns {object}
     */},{key:"getUserInfo",value:function getUserInfo(userId){cov_1vhu4pi89k.f[13]++;var userInfo=(cov_1vhu4pi89k.s[54]++,this.getAllUsers().filter(function(user){cov_1vhu4pi89k.f[14]++;cov_1vhu4pi89k.s[55]++;return user.id===userId;}));cov_1vhu4pi89k.s[56]++;if(!userInfo.length){cov_1vhu4pi89k.b[12][0]++;cov_1vhu4pi89k.s[57]++;return{message:'User information not found',error:true,code:404};}else{cov_1vhu4pi89k.b[12][1]++;cov_1vhu4pi89k.s[58]++;return{message:'User Information Found',error:false,code:200,data:_objectSpread({},userInfo[0])};}}}]);cov_1vhu4pi89k.s[59]++;return UserService;}());cov_1vhu4pi89k.s[60]++;exports["default"]=UserService;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuc2VydmljZS5qcyJdLCJuYW1lcyI6WyJVc2VyU2VydmljZSIsInVzZXJzIiwidXNlciIsImFsbFVzZXJzIiwiZ2V0QWxsVXNlcnMiLCJuZXdJZCIsImVtYWlsX2V4aXN0cyIsInRva2VuIiwibWVzc2FnZSIsImVycm9yIiwiY29kZSIsImRhdGEiLCJpZCIsInZhbGlkVXNlciIsImZpbHRlciIsImRiX3VzZXIiLCJwYXNzd29yZCIsImVtYWlsIiwibGVuZ3RoIiwidXNlcklkIiwidXNlckluZm8iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDQTs7QUFDQTs7Ozs7Ozs7Ozs7O0FBRUE7Ozs7SUFLcUJBLFc7OztBQUNuQjs7OztBQUlBLHlCQUFjO0FBQUE7O0FBQ1osU0FBS0MsS0FBTCxHQUFhQSxZQUFiO0FBQ0Q7QUFFRDs7Ozs7Ozs7O2tDQUtjO0FBQ1osYUFBTyxLQUFLQSxLQUFaO0FBQ0Q7QUFFRDs7Ozs7Ozs7NEJBS1FDLEksRUFBTTtBQUNaO0FBQ0EsVUFBTUMsUUFBUSxHQUFHLEtBQUtDLFdBQUwsRUFBakI7QUFDQSxVQUFNQyxLQUFLLEdBQUcsd0JBQVVGLFFBQVYsSUFBc0IsQ0FBcEM7QUFDQSxVQUFNRyxZQUFZLEdBQUcsMkJBQWFILFFBQWIsRUFBdUJELElBQXZCLEVBQTZCLE9BQTdCLENBQXJCO0FBQ0EsVUFBTUssS0FBSyxHQUFHLDZCQUFkOztBQUNBLFVBQUlELFlBQUosRUFBa0I7QUFDaEIsZUFBTztBQUFFRSxVQUFBQSxPQUFPLEVBQUUscUJBQVg7QUFBa0NDLFVBQUFBLEtBQUssRUFBRSxJQUF6QztBQUErQ0MsVUFBQUEsSUFBSSxFQUFFO0FBQXJELFNBQVA7QUFDRCxPQUZELE1BRU87QUFDTCxlQUFPO0FBQ0xGLFVBQUFBLE9BQU8sRUFBRSxtQkFESjtBQUVMQyxVQUFBQSxLQUFLLEVBQUUsS0FGRjtBQUdMQyxVQUFBQSxJQUFJLEVBQUUsR0FIRDtBQUlMQyxVQUFBQSxJQUFJO0FBQUlKLFlBQUFBLEtBQUssRUFBTEEsS0FBSjtBQUFXSyxZQUFBQSxFQUFFLEVBQUVQO0FBQWYsYUFBeUJILElBQXpCO0FBSkMsU0FBUDtBQU1EO0FBQ0Y7QUFFRDs7Ozs7Ozs7OEJBS1VBLEksRUFBTTtBQUNkLFVBQU1DLFFBQVEsR0FBRyxLQUFLQyxXQUFMLEVBQWpCO0FBQ0EsVUFBTUUsWUFBWSxHQUFHLDJCQUFhSCxRQUFiLEVBQXVCRCxJQUF2QixFQUE2QixPQUE3QixDQUFyQixDQUZjLENBR2Q7O0FBQ0EsVUFBSSxDQUFDSSxZQUFMLEVBQW1CO0FBQ2pCLGVBQU87QUFBRUUsVUFBQUEsT0FBTyxFQUFFLHNDQUFYO0FBQW1EQyxVQUFBQSxLQUFLLEVBQUUsSUFBMUQ7QUFBZ0VDLFVBQUFBLElBQUksRUFBRTtBQUF0RSxTQUFQO0FBQ0QsT0FGRCxNQUVPO0FBQ0wsWUFBTUcsU0FBUyxHQUFHVixRQUFRLENBQUNXLE1BQVQsQ0FBZ0IsVUFBQUMsT0FBTyxFQUFJO0FBQzNDLGlCQUFPYixJQUFJLENBQUNjLFFBQUwsS0FBa0JELE9BQU8sQ0FBQ0MsUUFBMUIsSUFBc0NkLElBQUksQ0FBQ2UsS0FBTCxLQUFlRixPQUFPLENBQUNFLEtBQXBFO0FBQ0QsU0FGaUIsQ0FBbEI7O0FBR0EsWUFBSUosU0FBUyxDQUFDSyxNQUFkLEVBQXNCO0FBQ3BCLGlCQUFPO0FBQ0xWLFlBQUFBLE9BQU8sRUFBRSxrQkFESjtBQUVMQyxZQUFBQSxLQUFLLEVBQUUsS0FGRjtBQUdMQyxZQUFBQSxJQUFJLEVBQUUsR0FIRDtBQUlMQyxZQUFBQSxJQUFJLG9CQUFPRSxTQUFTLENBQUMsQ0FBRCxDQUFoQjtBQUpDLFdBQVA7QUFNRCxTQVBELE1BT087QUFDTCxpQkFBTztBQUNMTCxZQUFBQSxPQUFPLEVBQUUsNkNBREo7QUFFTEMsWUFBQUEsS0FBSyxFQUFFLElBRkY7QUFHTEMsWUFBQUEsSUFBSSxFQUFFO0FBSEQsV0FBUDtBQUtEO0FBQ0Y7QUFDRjtBQUVEOzs7Ozs7OztnQ0FLWVMsTSxFQUFRO0FBQ2xCLFVBQU1DLFFBQVEsR0FBRyxLQUFLaEIsV0FBTCxHQUFtQlUsTUFBbkIsQ0FBMEIsVUFBQVosSUFBSTtBQUFBLGVBQUlBLElBQUksQ0FBQ1UsRUFBTCxLQUFZTyxNQUFoQjtBQUFBLE9BQTlCLENBQWpCOztBQUVBLFVBQUksQ0FBQ0MsUUFBUSxDQUFDRixNQUFkLEVBQXNCO0FBQ3BCLGVBQU87QUFBRVYsVUFBQUEsT0FBTyxFQUFFLDRCQUFYO0FBQXlDQyxVQUFBQSxLQUFLLEVBQUUsSUFBaEQ7QUFBc0RDLFVBQUFBLElBQUksRUFBRTtBQUE1RCxTQUFQO0FBQ0QsT0FGRCxNQUVPO0FBQ0wsZUFBTztBQUNMRixVQUFBQSxPQUFPLEVBQUUsd0JBREo7QUFFTEMsVUFBQUEsS0FBSyxFQUFFLEtBRkY7QUFHTEMsVUFBQUEsSUFBSSxFQUFFLEdBSEQ7QUFJTEMsVUFBQUEsSUFBSSxvQkFBT1MsUUFBUSxDQUFDLENBQUQsQ0FBZjtBQUpDLFNBQVA7QUFNRDtBQUNGIiwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcT2xheWlua2FcXEFEQ1xcYmFua2FcXGFwaVxcc3JjXFxzZXJ2aWNlcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGltcG9ydCBVc2VyIGZyb20gJy4uL21vZGVscy91c2VyLm1vZGVsJztcbmltcG9ydCB7IHVzZXJzIH0gZnJvbSAnLi4vLmRhdGEvdXNlcnMnO1xuaW1wb3J0IHsgcmVjb3JkRXhpc3RzLCBnZXRMYXN0SWQsIGdlbmVyYXRlVG9rZW4gfSBmcm9tICcuLi9IZWxwZXJzL2hlbHBlcnMnO1xuXG4vKipcbiAqIEBleHBvcnRzXG4gKiBAY2xhc3MgVXNlclNlcnZpY2VcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VyU2VydmljZSB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIFVzZXJTZXJ2aWNlLlxuICAgKiBAbWVtYmVyb2YgVXNlclxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy51c2VycyA9IHVzZXJzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgdXNlciByZXNvdXJjZXMuXG4gICAqIEBwYXJhbSBudWxsXG4gICAqIEByZXR1cm5zIHtvYmplY3R9XG4gICAqL1xuICBnZXRBbGxVc2VycygpIHtcbiAgICByZXR1cm4gdGhpcy51c2VycztcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IHVzZXIuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSB1c2VyXG4gICAqIEByZXR1cm5zIHtvYmplY3R9XG4gICAqL1xuICBhZGRVc2VyKHVzZXIpIHtcbiAgICAvLyBjb25zdCBuZXdfdXNlciA9IG5ldyBVc2VyKHsgLi4udXNlciB9KTtcbiAgICBjb25zdCBhbGxVc2VycyA9IHRoaXMuZ2V0QWxsVXNlcnMoKTtcbiAgICBjb25zdCBuZXdJZCA9IGdldExhc3RJZChhbGxVc2VycykgKyAxO1xuICAgIGNvbnN0IGVtYWlsX2V4aXN0cyA9IHJlY29yZEV4aXN0cyhhbGxVc2VycywgdXNlciwgJ2VtYWlsJyk7XG4gICAgY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7XG4gICAgaWYgKGVtYWlsX2V4aXN0cykge1xuICAgICAgcmV0dXJuIHsgbWVzc2FnZTogJ0VtYWlsIGFscmVhZHkgZXhpc3QnLCBlcnJvcjogdHJ1ZSwgY29kZTogNDAxIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG1lc3NhZ2U6ICdTaWdudXAgc3VjY2Vzc2Z1bCcsXG4gICAgICAgIGVycm9yOiBmYWxzZSxcbiAgICAgICAgY29kZTogMjAxLFxuICAgICAgICBkYXRhOiB7IHRva2VuLCBpZDogbmV3SWQsIC4uLnVzZXIgfVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9ncyBpbiBhIHVzZXIuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSB1c2VyXG4gICAqIEByZXR1cm5zIHtvYmplY3R9XG4gICAqL1xuICBsb2dpblVzZXIodXNlcikge1xuICAgIGNvbnN0IGFsbFVzZXJzID0gdGhpcy5nZXRBbGxVc2VycygpO1xuICAgIGNvbnN0IGVtYWlsX2V4aXN0cyA9IHJlY29yZEV4aXN0cyhhbGxVc2VycywgdXNlciwgJ2VtYWlsJyk7XG4gICAgLy8gY29uc3QgdG9rZW4gPSBnZW5lcmF0ZVRva2VuKCk7XG4gICAgaWYgKCFlbWFpbF9leGlzdHMpIHtcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6ICdVc2VycyBXaXRoIFRoaXMgRW1haWwgRG9lcyBOb3QgZXhpc3QnLCBlcnJvcjogdHJ1ZSwgY29kZTogNDA0IH07XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHZhbGlkVXNlciA9IGFsbFVzZXJzLmZpbHRlcihkYl91c2VyID0+IHtcbiAgICAgICAgcmV0dXJuIHVzZXIucGFzc3dvcmQgPT09IGRiX3VzZXIucGFzc3dvcmQgJiYgdXNlci5lbWFpbCA9PT0gZGJfdXNlci5lbWFpbDtcbiAgICAgIH0pO1xuICAgICAgaWYgKHZhbGlkVXNlci5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBtZXNzYWdlOiAnTG9naW4gc3VjY2Vzc2Z1bCcsXG4gICAgICAgICAgZXJyb3I6IGZhbHNlLFxuICAgICAgICAgIGNvZGU6IDIwMCxcbiAgICAgICAgICBkYXRhOiB7IC4uLnZhbGlkVXNlclswXSB9XG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG1lc3NhZ2U6ICdMb2dpbiBGYWlsZWQuIFBsZWFzZSBlbnRlciBhIHZhbGlkIHBhc3N3b3JkJyxcbiAgICAgICAgICBlcnJvcjogdHJ1ZSxcbiAgICAgICAgICBjb2RlOiA0MDFcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB1c2VyIGluZm9ybWF0aW9uLlxuICAgKiBAcGFyYW0ge251bWJlcn0gdXNlcklkXG4gICAqIEByZXR1cm5zIHtvYmplY3R9XG4gICAqL1xuICBnZXRVc2VySW5mbyh1c2VySWQpIHtcbiAgICBjb25zdCB1c2VySW5mbyA9IHRoaXMuZ2V0QWxsVXNlcnMoKS5maWx0ZXIodXNlciA9PiB1c2VyLmlkID09PSB1c2VySWQpO1xuXG4gICAgaWYgKCF1c2VySW5mby5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6ICdVc2VyIGluZm9ybWF0aW9uIG5vdCBmb3VuZCcsIGVycm9yOiB0cnVlLCBjb2RlOiA0MDQgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbWVzc2FnZTogJ1VzZXIgSW5mb3JtYXRpb24gRm91bmQnLFxuICAgICAgICBlcnJvcjogZmFsc2UsXG4gICAgICAgIGNvZGU6IDIwMCxcbiAgICAgICAgZGF0YTogeyAuLi51c2VySW5mb1swXSB9XG4gICAgICB9O1xuICAgIH1cbiAgfVxufVxuIl19