{"version":3,"sources":["user.service.js"],"names":["Object","defineProperty","exports","value","_users","require","_helpers","_objectSpread","target","i","arguments","length","source","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","enumerable","forEach","key","_defineProperty","obj","configurable","writable","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","prototype","UserService","users","getAllUsers","addUser","user","allUsers","newId","getLastId","email_exists","recordExists","token","generateToken","message","error","code","data","id","loginUser","validUser","db_user","password","email","getUserInfo","userId","userInfo"],"mappings":"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","sourceRoot":"C:\\Users\\Olayinka\\ADC\\banka\\api\\dist\\services","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _users = require(\"../.data/users\");\n\nvar _helpers = require(\"../Helpers/helpers\");\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * @exports\n * @class UserService\n */\nvar UserService =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Creates an instance of UserService.\n   * @memberof User\n   */\n  function UserService() {\n    _classCallCheck(this, UserService);\n\n    this.users = _users.users;\n  }\n  /**\n   * Get all user resources.\n   * @param null\n   * @returns {object}\n   */\n\n\n  _createClass(UserService, [{\n    key: \"getAllUsers\",\n    value: function getAllUsers() {\n      return this.users;\n    }\n    /**\n     * Creates a new user.\n     * @param {object} user\n     * @returns {object}\n     */\n\n  }, {\n    key: \"addUser\",\n    value: function addUser(user) {\n      // const new_user = new User({ ...user });\n      var allUsers = this.getAllUsers();\n      var newId = (0, _helpers.getLastId)(allUsers) + 1;\n      var email_exists = (0, _helpers.recordExists)(allUsers, user, 'email');\n      var token = (0, _helpers.generateToken)();\n\n      if (email_exists) {\n        return {\n          message: 'Email already exist',\n          error: true,\n          code: 401\n        };\n      } else {\n        return {\n          message: 'Signup successful',\n          error: false,\n          code: 201,\n          data: _objectSpread({\n            token: token,\n            id: newId\n          }, user)\n        };\n      }\n    }\n    /**\n     * Logs in a user.\n     * @param {object} user\n     * @returns {object}\n     */\n\n  }, {\n    key: \"loginUser\",\n    value: function loginUser(user) {\n      var allUsers = this.getAllUsers();\n      var email_exists = (0, _helpers.recordExists)(allUsers, user, 'email'); // const token = generateToken();\n\n      if (!email_exists) {\n        return {\n          message: 'Users With This Email Does Not exist',\n          error: true,\n          code: 404\n        };\n      } else {\n        var validUser = allUsers.filter(function (db_user) {\n          return user.password === db_user.password && user.email === db_user.email;\n        });\n\n        if (validUser.length) {\n          return {\n            message: 'Login successful',\n            error: false,\n            code: 200,\n            data: _objectSpread({}, validUser[0])\n          };\n        } else {\n          return {\n            message: 'Login Failed. Please enter a valid password',\n            error: true,\n            code: 401\n          };\n        }\n      }\n    }\n    /**\n     * Gets user information.\n     * @param {number} userId\n     * @returns {object}\n     */\n\n  }, {\n    key: \"getUserInfo\",\n    value: function getUserInfo(userId) {\n      var userInfo = this.getAllUsers().filter(function (user) {\n        return user.id === userId;\n      });\n\n      if (!userInfo.length) {\n        return {\n          message: 'User information not found',\n          error: true,\n          code: 404\n        };\n      } else {\n        return {\n          message: 'User Information Found',\n          error: false,\n          code: 200,\n          data: _objectSpread({}, userInfo[0])\n        };\n      }\n    }\n  }]);\n\n  return UserService;\n}();\n\nexports[\"default\"] = UserService;"]}