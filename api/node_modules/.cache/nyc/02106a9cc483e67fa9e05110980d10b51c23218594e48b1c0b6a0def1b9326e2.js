"use strict";var cov_mj5h5ukpr=function(){var path="C:\\Users\\Olayinka\\ADC\\banka\\api\\src\\services\\accounts.service.js";var hash="647e7c0f62e60b0bdb6292aef5a9b9e8230de0f4";var Function=function(){}.constructor;var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Olayinka\\ADC\\banka\\api\\src\\services\\accounts.service.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:28}},"2":{start:{line:8,column:16},end:{line:8,column:44}},"3":{start:{line:10,column:15},end:{line:10,column:44}},"4":{start:{line:12,column:12},end:{line:12,column:61}},"5":{start:{line:14,column:39},end:{line:14,column:95}},"6":{start:{line:16,column:33},end:{line:16,column:464}},"7":{start:{line:16,column:46},end:{line:16,column:47}},"8":{start:{line:16,column:91},end:{line:16,column:131}},"9":{start:{line:16,column:147},end:{line:16,column:166}},"10":{start:{line:16,column:168},end:{line:16,column:382}},"11":{start:{line:16,column:226},end:{line:16,column:380}},"12":{start:{line:16,column:312},end:{line:16,column:375}},"13":{start:{line:16,column:383},end:{line:16,column:462}},"14":{start:{line:16,column:416},end:{line:16,column:458}},"15":{start:{line:16,column:465},end:{line:16,column:479}},"16":{start:{line:18,column:44},end:{line:18,column:195}},"17":{start:{line:18,column:62},end:{line:18,column:166}},"18":{start:{line:18,column:176},end:{line:18,column:193}},"19":{start:{line:18,column:196},end:{line:18,column:207}},"20":{start:{line:20,column:35},end:{line:20,column:115}},"21":{start:{line:22,column:32},end:{line:22,column:103}},"22":{start:{line:24,column:34},end:{line:24,column:160}},"23":{start:{line:24,column:136},end:{line:24,column:160}},"24":{start:{line:26,column:35},end:{line:26,column:164}},"25":{start:{line:26,column:61},end:{line:26,column:149}},"26":{start:{line:26,column:74},end:{line:26,column:75}},"27":{start:{line:26,column:84},end:{line:26,column:105}},"28":{start:{line:26,column:130},end:{line:26,column:147}},"29":{start:{line:26,column:150},end:{line:26,column:162}},"30":{start:{line:28,column:50},end:{line:28,column:151}},"31":{start:{line:28,column:92},end:{line:28,column:149}},"32":{start:{line:30,column:44},end:{line:30,column:315}},"33":{start:{line:30,column:57},end:{line:30,column:58}},"34":{start:{line:30,column:102},end:{line:30,column:110}},"35":{start:{line:30,column:112},end:{line:30,column:167}},"36":{start:{line:30,column:168},end:{line:30,column:199}},"37":{start:{line:30,column:200},end:{line:30,column:254}},"38":{start:{line:30,column:227},end:{line:30,column:254}},"39":{start:{line:30,column:255},end:{line:30,column:313}},"40":{start:{line:32,column:62},end:{line:32,column:131}},"41":{start:{line:32,column:78},end:{line:32,column:131}},"42":{start:{line:32,column:132},end:{line:32,column:193}},"43":{start:{line:32,column:149},end:{line:32,column:193}},"44":{start:{line:32,column:194},end:{line:32,column:213}},"45":{start:{line:40,column:0},end:{line:190,column:3}},"46":{start:{line:46,column:4},end:{line:46,column:42}},"47":{start:{line:48,column:4},end:{line:48,column:39}},"48":{start:{line:57,column:2},end:{line:187,column:6}},"49":{start:{line:60,column:6},end:{line:60,column:27}},"50":{start:{line:71,column:24},end:{line:71,column:45}},"51":{start:{line:72,column:18},end:{line:72,column:58}},"52":{start:{line:73,column:25},end:{line:75,column:8}},"53":{start:{line:74,column:8},end:{line:74,column:51}},"54":{start:{line:76,column:32},end:{line:76,column:93}},"55":{start:{line:78,column:6},end:{line:122,column:7}},"56":{start:{line:79,column:8},end:{line:83,column:10}},"57":{start:{line:85,column:29},end:{line:87,column:16}},"58":{start:{line:86,column:10},end:{line:86,column:39}},"59":{start:{line:89,column:26},end:{line:89,column:48}},"60":{start:{line:90,column:23},end:{line:90,column:65}},"61":{start:{line:92,column:8},end:{line:121,column:9}},"62":{start:{line:93,column:31},end:{line:93,column:44}},"63":{start:{line:94,column:19},end:{line:94,column:36}},"64":{start:{line:95,column:26},end:{line:95,column:50}},"65":{start:{line:96,column:25},end:{line:96,column:48}},"66":{start:{line:97,column:22},end:{line:97,column:42}},"67":{start:{line:98,column:27},end:{line:108,column:11}},"68":{start:{line:109,column:10},end:{line:114,column:12}},"69":{start:{line:116,column:10},end:{line:120,column:12}},"70":{start:{line:134,column:18},end:{line:134,column:40}},"71":{start:{line:135,column:21},end:{line:135,column:40}},"72":{start:{line:136,column:22},end:{line:138,column:8}},"73":{start:{line:137,column:8},end:{line:137,column:65}},"74":{start:{line:140,column:6},end:{line:185,column:7}},"75":{start:{line:141,column:30},end:{line:143,column:10}},"76":{start:{line:142,column:10},end:{line:142,column:74}},"77":{start:{line:145,column:8},end:{line:178,column:9}},"78":{start:{line:146,column:32},end:{line:146,column:64}},"79":{start:{line:148,column:10},end:{line:154,column:11}},"80":{start:{line:149,column:12},end:{line:153,column:14}},"81":{start:{line:156,column:10},end:{line:171,column:11}},"82":{start:{line:157,column:12},end:{line:157,column:50}},"83":{start:{line:158,column:12},end:{line:162,column:14}},"84":{start:{line:164,column:12},end:{line:164,column:102}},"85":{start:{line:165,column:12},end:{line:170,column:14}},"86":{start:{line:173,column:10},end:{line:177,column:12}},"87":{start:{line:180,column:8},end:{line:184,column:10}},"88":{start:{line:189,column:2},end:{line:189,column:24}},"89":{start:{line:192,column:0},end:{line:192,column:36}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:14,column:9},end:{line:14,column:31}},loc:{start:{line:14,column:37},end:{line:14,column:97}},line:14},"1":{name:"_objectSpread",decl:{start:{line:16,column:9},end:{line:16,column:22}},loc:{start:{line:16,column:31},end:{line:16,column:481}},line:16},"2":{name:"(anonymous_2)",decl:{start:{line:16,column:295},end:{line:16,column:296}},loc:{start:{line:16,column:310},end:{line:16,column:377}},line:16},"3":{name:"(anonymous_3)",decl:{start:{line:16,column:399},end:{line:16,column:400}},loc:{start:{line:16,column:414},end:{line:16,column:460}},line:16},"4":{name:"_defineProperty",decl:{start:{line:18,column:9},end:{line:18,column:24}},loc:{start:{line:18,column:42},end:{line:18,column:209}},line:18},"5":{name:"_toConsumableArray",decl:{start:{line:20,column:9},end:{line:20,column:27}},loc:{start:{line:20,column:33},end:{line:20,column:117}},line:20},"6":{name:"_nonIterableSpread",decl:{start:{line:22,column:9},end:{line:22,column:27}},loc:{start:{line:22,column:30},end:{line:22,column:105}},line:22},"7":{name:"_iterableToArray",decl:{start:{line:24,column:9},end:{line:24,column:25}},loc:{start:{line:24,column:32},end:{line:24,column:162}},line:24},"8":{name:"_arrayWithoutHoles",decl:{start:{line:26,column:9},end:{line:26,column:27}},loc:{start:{line:26,column:33},end:{line:26,column:166}},line:26},"9":{name:"_classCallCheck",decl:{start:{line:28,column:9},end:{line:28,column:24}},loc:{start:{line:28,column:48},end:{line:28,column:153}},line:28},"10":{name:"_defineProperties",decl:{start:{line:30,column:9},end:{line:30,column:26}},loc:{start:{line:30,column:42},end:{line:30,column:317}},line:30},"11":{name:"_createClass",decl:{start:{line:32,column:9},end:{line:32,column:21}},loc:{start:{line:32,column:60},end:{line:32,column:215}},line:32},"12":{name:"(anonymous_12)",decl:{start:{line:40,column:0},end:{line:40,column:1}},loc:{start:{line:40,column:12},end:{line:190,column:1}},line:40},"13":{name:"AccountService",decl:{start:{line:45,column:11},end:{line:45,column:25}},loc:{start:{line:45,column:28},end:{line:49,column:3}},line:45},"14":{name:"getAllAccounts",decl:{start:{line:59,column:20},end:{line:59,column:34}},loc:{start:{line:59,column:37},end:{line:61,column:5}},line:59},"15":{name:"addAccount",decl:{start:{line:70,column:20},end:{line:70,column:30}},loc:{start:{line:70,column:44},end:{line:123,column:5}},line:70},"16":{name:"(anonymous_16)",decl:{start:{line:73,column:44},end:{line:73,column:45}},loc:{start:{line:73,column:63},end:{line:75,column:7}},line:73},"17":{name:"(anonymous_17)",decl:{start:{line:85,column:95},end:{line:85,column:96}},loc:{start:{line:85,column:114},end:{line:87,column:9}},line:85},"18":{name:"updateAccountStatus",decl:{start:{line:133,column:20},end:{line:133,column:39}},loc:{start:{line:133,column:56},end:{line:186,column:5}},line:133},"19":{name:"(anonymous_19)",decl:{start:{line:136,column:38},end:{line:136,column:39}},loc:{start:{line:136,column:57},end:{line:138,column:7}},line:136},"20":{name:"(anonymous_20)",decl:{start:{line:141,column:51},end:{line:141,column:52}},loc:{start:{line:141,column:70},end:{line:143,column:9}},line:141}},branchMap:{"0":{loc:{start:{line:14,column:46},end:{line:14,column:94}},type:"cond-expr",locations:[{start:{line:14,column:70},end:{line:14,column:73}},{start:{line:14,column:76},end:{line:14,column:94}}],line:14},"1":{loc:{start:{line:14,column:46},end:{line:14,column:67}},type:"binary-expr",locations:[{start:{line:14,column:46},end:{line:14,column:49}},{start:{line:14,column:53},end:{line:14,column:67}}],line:14},"2":{loc:{start:{line:16,column:91},end:{line:16,column:131}},type:"cond-expr",locations:[{start:{line:16,column:114},end:{line:16,column:126}},{start:{line:16,column:129},end:{line:16,column:131}}],line:16},"3":{loc:{start:{line:16,column:168},end:{line:16,column:382}},type:"if",locations:[{start:{line:16,column:168},end:{line:16,column:382}},{start:{line:16,column:168},end:{line:16,column:382}}],line:16},"4":{loc:{start:{line:18,column:44},end:{line:18,column:195}},type:"if",locations:[{start:{line:18,column:44},end:{line:18,column:195}},{start:{line:18,column:44},end:{line:18,column:195}}],line:18},"5":{loc:{start:{line:20,column:42},end:{line:20,column:114}},type:"binary-expr",locations:[{start:{line:20,column:42},end:{line:20,column:65}},{start:{line:20,column:69},end:{line:20,column:90}},{start:{line:20,column:94},end:{line:20,column:114}}],line:20},"6":{loc:{start:{line:24,column:34},end:{line:24,column:160}},type:"if",locations:[{start:{line:24,column:34},end:{line:24,column:160}},{start:{line:24,column:34},end:{line:24,column:160}}],line:24},"7":{loc:{start:{line:24,column:38},end:{line:24,column:134}},type:"binary-expr",locations:[{start:{line:24,column:38},end:{line:24,column:69}},{start:{line:24,column:73},end:{line:24,column:134}}],line:24},"8":{loc:{start:{line:26,column:35},end:{line:26,column:164}},type:"if",locations:[{start:{line:26,column:35},end:{line:26,column:164}},{start:{line:26,column:35},end:{line:26,column:164}}],line:26},"9":{loc:{start:{line:28,column:50},end:{line:28,column:151}},type:"if",locations:[{start:{line:28,column:50},end:{line:28,column:151}},{start:{line:28,column:50},end:{line:28,column:151}}],line:28},"10":{loc:{start:{line:30,column:136},end:{line:30,column:166}},type:"binary-expr",locations:[{start:{line:30,column:136},end:{line:30,column:157}},{start:{line:30,column:161},end:{line:30,column:166}}],line:30},"11":{loc:{start:{line:30,column:200},end:{line:30,column:254}},type:"if",locations:[{start:{line:30,column:200},end:{line:30,column:254}},{start:{line:30,column:200},end:{line:30,column:254}}],line:30},"12":{loc:{start:{line:32,column:62},end:{line:32,column:131}},type:"if",locations:[{start:{line:32,column:62},end:{line:32,column:131}},{start:{line:32,column:62},end:{line:32,column:131}}],line:32},"13":{loc:{start:{line:32,column:132},end:{line:32,column:193}},type:"if",locations:[{start:{line:32,column:132},end:{line:32,column:193}},{start:{line:32,column:132},end:{line:32,column:193}}],line:32},"14":{loc:{start:{line:78,column:6},end:{line:122,column:7}},type:"if",locations:[{start:{line:78,column:6},end:{line:122,column:7}},{start:{line:78,column:6},end:{line:122,column:7}}],line:78},"15":{loc:{start:{line:92,column:8},end:{line:121,column:9}},type:"if",locations:[{start:{line:92,column:8},end:{line:121,column:9}},{start:{line:92,column:8},end:{line:121,column:9}}],line:92},"16":{loc:{start:{line:137,column:15},end:{line:137,column:64}},type:"binary-expr",locations:[{start:{line:137,column:15},end:{line:137,column:36}},{start:{line:137,column:40},end:{line:137,column:64}}],line:137},"17":{loc:{start:{line:140,column:6},end:{line:185,column:7}},type:"if",locations:[{start:{line:140,column:6},end:{line:185,column:7}},{start:{line:140,column:6},end:{line:185,column:7}}],line:140},"18":{loc:{start:{line:145,column:8},end:{line:178,column:9}},type:"if",locations:[{start:{line:145,column:8},end:{line:178,column:9}},{start:{line:145,column:8},end:{line:178,column:9}}],line:145},"19":{loc:{start:{line:148,column:10},end:{line:154,column:11}},type:"if",locations:[{start:{line:148,column:10},end:{line:154,column:11}},{start:{line:148,column:10},end:{line:154,column:11}}],line:148},"20":{loc:{start:{line:156,column:10},end:{line:171,column:11}},type:"if",locations:[{start:{line:156,column:10},end:{line:171,column:11}},{start:{line:156,column:10},end:{line:171,column:11}}],line:156},"21":{loc:{start:{line:164,column:40},end:{line:164,column:101}},type:"cond-expr",locations:[{start:{line:164,column:81},end:{line:164,column:90}},{start:{line:164,column:93},end:{line:164,column:101}}],line:164}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_mj5h5ukpr.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_mj5h5ukpr.s[1]++;exports["default"]=void 0;var _accounts=(cov_mj5h5ukpr.s[2]++,require("../.data/accounts"));var _helpers=(cov_mj5h5ukpr.s[3]++,require("../Helpers/helpers"));var _user=(cov_mj5h5ukpr.s[4]++,_interopRequireDefault(require("./user.service")));function _interopRequireDefault(obj){cov_mj5h5ukpr.f[0]++;cov_mj5h5ukpr.s[5]++;return(cov_mj5h5ukpr.b[1][0]++,obj)&&(cov_mj5h5ukpr.b[1][1]++,obj.__esModule)?(cov_mj5h5ukpr.b[0][0]++,obj):(cov_mj5h5ukpr.b[0][1]++,{"default":obj});}function _objectSpread(target){cov_mj5h5ukpr.f[1]++;cov_mj5h5ukpr.s[6]++;for(var i=(cov_mj5h5ukpr.s[7]++,1);i<arguments.length;i++){var source=(cov_mj5h5ukpr.s[8]++,arguments[i]!=null?(cov_mj5h5ukpr.b[2][0]++,arguments[i]):(cov_mj5h5ukpr.b[2][1]++,{}));var ownKeys=(cov_mj5h5ukpr.s[9]++,Object.keys(source));cov_mj5h5ukpr.s[10]++;if(typeof Object.getOwnPropertySymbols==='function'){cov_mj5h5ukpr.b[3][0]++;cov_mj5h5ukpr.s[11]++;ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){cov_mj5h5ukpr.f[2]++;cov_mj5h5ukpr.s[12]++;return Object.getOwnPropertyDescriptor(source,sym).enumerable;}));}else{cov_mj5h5ukpr.b[3][1]++;}cov_mj5h5ukpr.s[13]++;ownKeys.forEach(function(key){cov_mj5h5ukpr.f[3]++;cov_mj5h5ukpr.s[14]++;_defineProperty(target,key,source[key]);});}cov_mj5h5ukpr.s[15]++;return target;}function _defineProperty(obj,key,value){cov_mj5h5ukpr.f[4]++;cov_mj5h5ukpr.s[16]++;if(key in obj){cov_mj5h5ukpr.b[4][0]++;cov_mj5h5ukpr.s[17]++;Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{cov_mj5h5ukpr.b[4][1]++;cov_mj5h5ukpr.s[18]++;obj[key]=value;}cov_mj5h5ukpr.s[19]++;return obj;}function _toConsumableArray(arr){cov_mj5h5ukpr.f[5]++;cov_mj5h5ukpr.s[20]++;return(cov_mj5h5ukpr.b[5][0]++,_arrayWithoutHoles(arr))||(cov_mj5h5ukpr.b[5][1]++,_iterableToArray(arr))||(cov_mj5h5ukpr.b[5][2]++,_nonIterableSpread());}function _nonIterableSpread(){cov_mj5h5ukpr.f[6]++;cov_mj5h5ukpr.s[21]++;throw new TypeError("Invalid attempt to spread non-iterable instance");}function _iterableToArray(iter){cov_mj5h5ukpr.f[7]++;cov_mj5h5ukpr.s[22]++;if((cov_mj5h5ukpr.b[7][0]++,Symbol.iterator in Object(iter))||(cov_mj5h5ukpr.b[7][1]++,Object.prototype.toString.call(iter)==="[object Arguments]")){cov_mj5h5ukpr.b[6][0]++;cov_mj5h5ukpr.s[23]++;return Array.from(iter);}else{cov_mj5h5ukpr.b[6][1]++;}}function _arrayWithoutHoles(arr){cov_mj5h5ukpr.f[8]++;cov_mj5h5ukpr.s[24]++;if(Array.isArray(arr)){cov_mj5h5ukpr.b[8][0]++;cov_mj5h5ukpr.s[25]++;for(var i=(cov_mj5h5ukpr.s[26]++,0),arr2=(cov_mj5h5ukpr.s[27]++,new Array(arr.length));i<arr.length;i++){cov_mj5h5ukpr.s[28]++;arr2[i]=arr[i];}cov_mj5h5ukpr.s[29]++;return arr2;}else{cov_mj5h5ukpr.b[8][1]++;}}function _classCallCheck(instance,Constructor){cov_mj5h5ukpr.f[9]++;cov_mj5h5ukpr.s[30]++;if(!(instance instanceof Constructor)){cov_mj5h5ukpr.b[9][0]++;cov_mj5h5ukpr.s[31]++;throw new TypeError("Cannot call a class as a function");}else{cov_mj5h5ukpr.b[9][1]++;}}function _defineProperties(target,props){cov_mj5h5ukpr.f[10]++;cov_mj5h5ukpr.s[32]++;for(var i=(cov_mj5h5ukpr.s[33]++,0);i<props.length;i++){var descriptor=(cov_mj5h5ukpr.s[34]++,props[i]);cov_mj5h5ukpr.s[35]++;descriptor.enumerable=(cov_mj5h5ukpr.b[10][0]++,descriptor.enumerable)||(cov_mj5h5ukpr.b[10][1]++,false);cov_mj5h5ukpr.s[36]++;descriptor.configurable=true;cov_mj5h5ukpr.s[37]++;if("value"in descriptor){cov_mj5h5ukpr.b[11][0]++;cov_mj5h5ukpr.s[38]++;descriptor.writable=true;}else{cov_mj5h5ukpr.b[11][1]++;}cov_mj5h5ukpr.s[39]++;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){cov_mj5h5ukpr.f[11]++;cov_mj5h5ukpr.s[40]++;if(protoProps){cov_mj5h5ukpr.b[12][0]++;cov_mj5h5ukpr.s[41]++;_defineProperties(Constructor.prototype,protoProps);}else{cov_mj5h5ukpr.b[12][1]++;}cov_mj5h5ukpr.s[42]++;if(staticProps){cov_mj5h5ukpr.b[13][0]++;cov_mj5h5ukpr.s[43]++;_defineProperties(Constructor,staticProps);}else{cov_mj5h5ukpr.b[13][1]++;}cov_mj5h5ukpr.s[44]++;return Constructor;}/**
 * @exports
 * @class AccountService
 */var AccountService=(/*#__PURE__*/cov_mj5h5ukpr.s[45]++,function(){cov_mj5h5ukpr.f[12]++;/**
   * Creates an instance of AccountService.
   * @memberof AccountService
   */function AccountService(){cov_mj5h5ukpr.f[13]++;cov_mj5h5ukpr.s[46]++;_classCallCheck(this,AccountService);cov_mj5h5ukpr.s[47]++;this.accounts=_accounts.accounts;}/**
   * Get all account resources.
   * @param null
   * @returns {object}
   */cov_mj5h5ukpr.s[48]++;_createClass(AccountService,[{key:"getAllAccounts",value:function getAllAccounts(){cov_mj5h5ukpr.f[14]++;cov_mj5h5ukpr.s[49]++;return this.accounts;}/**
     * Creates a new bank account.
     * @param {object} accountInfo
     * @returns {object}
     */},{key:"addAccount",value:function addAccount(accountInfo){cov_mj5h5ukpr.f[15]++;var allAccounts=(cov_mj5h5ukpr.s[50]++,this.getAllAccounts());var newId=(cov_mj5h5ukpr.s[51]++,(0,_helpers.getLastId)(allAccounts)+1);var userAccounts=(cov_mj5h5ukpr.s[52]++,allAccounts.filter(function(account){cov_mj5h5ukpr.f[16]++;cov_mj5h5ukpr.s[53]++;return account.owner===accountInfo.owner;}));var account_type_exists=(cov_mj5h5ukpr.s[54]++,(0,_helpers.recordExists)(userAccounts,accountInfo,'type'));cov_mj5h5ukpr.s[55]++;if(account_type_exists){cov_mj5h5ukpr.b[14][0]++;cov_mj5h5ukpr.s[56]++;return{message:"You already have a ".concat(accountInfo.type," account"),error:true,code:401};}else{cov_mj5h5ukpr.b[14][1]++;var account_number=(cov_mj5h5ukpr.s[57]++,Math.max.apply(Math,_toConsumableArray(this.getAllAccounts().map(function(account){cov_mj5h5ukpr.f[17]++;cov_mj5h5ukpr.s[58]++;return account.accountNumber;})))+1);// console.log('Account number',account_number);
var userService=(cov_mj5h5ukpr.s[59]++,new _user["default"]());var userInfo=(cov_mj5h5ukpr.s[60]++,userService.getUserInfo(accountInfo.owner));cov_mj5h5ukpr.s[61]++;if(!userInfo.error){cov_mj5h5ukpr.b[15][0]++;var _userInfo$data=(cov_mj5h5ukpr.s[62]++,userInfo.data),id=(cov_mj5h5ukpr.s[63]++,_userInfo$data.id),firstName=(cov_mj5h5ukpr.s[64]++,_userInfo$data.firstName),lastName=(cov_mj5h5ukpr.s[65]++,_userInfo$data.lastName),email=(cov_mj5h5ukpr.s[66]++,_userInfo$data.email);var newAccount=(cov_mj5h5ukpr.s[67]++,{id:newId,accountNumber:account_number,type:accountInfo.type,openingBalance:parseFloat('0.00'),createdOn:new Date(),owner:id,firstName:firstName,lastName:lastName,email:email});cov_mj5h5ukpr.s[68]++;return{message:'Account Created successfully',error:false,code:201,data:_objectSpread({},newAccount)};}else{cov_mj5h5ukpr.b[15][1]++;cov_mj5h5ukpr.s[69]++;return{message:'Error Creating Account User information required',error:true,code:403};}}}/**
     * Activates/Deactvate a bank account.
     * @param {number} userId
     * @param {object} update
     * @returns {object}
     */},{key:"updateAccountStatus",value:function updateAccountStatus(update,userId){cov_mj5h5ukpr.f[18]++;var users=(cov_mj5h5ukpr.s[70]++,new _user["default"]());var allUsers=(cov_mj5h5ukpr.s[71]++,users.getAllUsers());var validUser=(cov_mj5h5ukpr.s[72]++,allUsers.filter(function(db_user){cov_mj5h5ukpr.f[19]++;cov_mj5h5ukpr.s[73]++;return(cov_mj5h5ukpr.b[16][0]++,userId===db_user.id)&&(cov_mj5h5ukpr.b[16][1]++,db_user.isAdmin===true);}));cov_mj5h5ukpr.s[74]++;if(validUser.length){cov_mj5h5ukpr.b[17][0]++;var accountToUpdate=(cov_mj5h5ukpr.s[75]++,this.accounts.filter(function(account){cov_mj5h5ukpr.f[20]++;cov_mj5h5ukpr.s[76]++;return account.accountNumber===parseInt(update.accountNumber);}));cov_mj5h5ukpr.s[77]++;if(accountToUpdate.length){cov_mj5h5ukpr.b[18][0]++;var allowedStatuses=(cov_mj5h5ukpr.s[78]++,['deleted','dormant','active']);cov_mj5h5ukpr.s[79]++;if(!allowedStatuses.includes(update.status)){cov_mj5h5ukpr.b[19][0]++;cov_mj5h5ukpr.s[80]++;return{message:"Unidentified status specified",error:true,code:400};}else{cov_mj5h5ukpr.b[19][1]++;}cov_mj5h5ukpr.s[81]++;if(update.status==='deleted'){cov_mj5h5ukpr.b[20][0]++;cov_mj5h5ukpr.s[82]++;accountToUpdate[0].status='deleted';cov_mj5h5ukpr.s[83]++;return{message:"Account deleted successfully",error:false,code:200};}else{cov_mj5h5ukpr.b[20][1]++;cov_mj5h5ukpr.s[84]++;accountToUpdate[0].status=accountToUpdate[0].status==='active'?(cov_mj5h5ukpr.b[21][0]++,'dormant'):(cov_mj5h5ukpr.b[21][1]++,'active');cov_mj5h5ukpr.s[85]++;return{message:"Account Status successfully updated to '".concat(accountToUpdate[0].status,"'"),error:false,code:200,data:_objectSpread({},accountToUpdate[0])};}}else{cov_mj5h5ukpr.b[18][1]++;cov_mj5h5ukpr.s[86]++;return{message:"Account number ".concat(update.accountNumber," does not exist"),error:true,code:404};}}else{cov_mj5h5ukpr.b[17][1]++;cov_mj5h5ukpr.s[87]++;return{message:'You are not authorized to perform this action.',error:true,code:403};}}}]);cov_mj5h5ukpr.s[88]++;return AccountService;}());cov_mj5h5ukpr.s[89]++;exports["default"]=AccountService;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY291bnRzLnNlcnZpY2UuanMiXSwibmFtZXMiOlsiQWNjb3VudFNlcnZpY2UiLCJhY2NvdW50cyIsImFjY291bnRJbmZvIiwiYWxsQWNjb3VudHMiLCJnZXRBbGxBY2NvdW50cyIsIm5ld0lkIiwidXNlckFjY291bnRzIiwiZmlsdGVyIiwiYWNjb3VudCIsIm93bmVyIiwiYWNjb3VudF90eXBlX2V4aXN0cyIsIm1lc3NhZ2UiLCJ0eXBlIiwiZXJyb3IiLCJjb2RlIiwiYWNjb3VudF9udW1iZXIiLCJNYXRoIiwibWF4IiwibWFwIiwiYWNjb3VudE51bWJlciIsInVzZXJTZXJ2aWNlIiwiVXNlclNlcnZpY2UiLCJ1c2VySW5mbyIsImdldFVzZXJJbmZvIiwiZGF0YSIsImlkIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJlbWFpbCIsIm5ld0FjY291bnQiLCJvcGVuaW5nQmFsYW5jZSIsInBhcnNlRmxvYXQiLCJjcmVhdGVkT24iLCJEYXRlIiwidXBkYXRlIiwidXNlcklkIiwidXNlcnMiLCJhbGxVc2VycyIsImdldEFsbFVzZXJzIiwidmFsaWRVc2VyIiwiZGJfdXNlciIsImlzQWRtaW4iLCJsZW5ndGgiLCJhY2NvdW50VG9VcGRhdGUiLCJwYXJzZUludCIsImFsbG93ZWRTdGF0dXNlcyIsImluY2x1ZGVzIiwic3RhdHVzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQTs7OztJQUtxQkEsYzs7O0FBQ25COzs7O0FBSUEsNEJBQWM7QUFBQTs7QUFDWixTQUFLQyxRQUFMLEdBQWdCQSxrQkFBaEI7QUFDRDtBQUVEOzs7Ozs7Ozs7cUNBS2lCO0FBQ2YsYUFBTyxLQUFLQSxRQUFaO0FBQ0Q7QUFFRDs7Ozs7Ozs7K0JBS1dDLFcsRUFBYTtBQUN0QixVQUFNQyxXQUFXLEdBQUcsS0FBS0MsY0FBTCxFQUFwQjtBQUNBLFVBQU1DLEtBQUssR0FBRyx3QkFBVUYsV0FBVixJQUF5QixDQUF2QztBQUNB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QSxPQUFPLDJCQUFvQnVCLE1BQU0sQ0FBQ2YsYUFBM0Isb0JBREY7QUFFTE4sWUFBQUEsS0FBSyxFQUFFLElBRkY7QUFHTEMsWUFBQUEsSUFBSSxFQUFFO0FBSEQsV0FBUDtBQUtEO0FBQ0YsT0FwQ0QsTUFvQ087QUFDTCxlQUFPO0FBQ0xILFVBQUFBLE9BQU8sRUFBRSxnREFESjtBQUVMRSxVQUFBQSxLQUFLLEVBQUUsSUFGRjtBQUdMQyxVQUFBQSxJQUFJLEVBQUU7QUFIRCxTQUFQO0FBS0Q7QUFDRiIsInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXE9sYXlpbmthXFxBRENcXGJhbmthXFxhcGlcXHNyY1xcc2VydmljZXMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhY2NvdW50cyB9IGZyb20gJy4uLy5kYXRhL2FjY291bnRzJztcbmltcG9ydCB7IHJlY29yZEV4aXN0cywgZ2V0TGFzdElkIH0gZnJvbSAnLi4vSGVscGVycy9oZWxwZXJzJztcbmltcG9ydCBVc2VyU2VydmljZSBmcm9tICcuL3VzZXIuc2VydmljZSc7XG5cbi8qKlxuICogQGV4cG9ydHNcbiAqIEBjbGFzcyBBY2NvdW50U2VydmljZVxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFjY291bnRTZXJ2aWNlIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgQWNjb3VudFNlcnZpY2UuXG4gICAqIEBtZW1iZXJvZiBBY2NvdW50U2VydmljZVxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5hY2NvdW50cyA9IGFjY291bnRzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgYWNjb3VudCByZXNvdXJjZXMuXG4gICAqIEBwYXJhbSBudWxsXG4gICAqIEByZXR1cm5zIHtvYmplY3R9XG4gICAqL1xuICBnZXRBbGxBY2NvdW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5hY2NvdW50cztcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IGJhbmsgYWNjb3VudC5cbiAgICogQHBhcmFtIHtvYmplY3R9IGFjY291bnRJbmZvXG4gICAqIEByZXR1cm5zIHtvYmplY3R9XG4gICAqL1xuICBhZGRBY2NvdW50KGFjY291bnRJbmZvKSB7XG4gICAgY29uc3QgYWxsQWNjb3VudHMgPSB0aGlzLmdldEFsbEFjY291bnRzKCk7XG4gICAgY29uc3QgbmV3SWQgPSBnZXRMYXN0SWQoYWxsQWNjb3VudHMpICsgMTtcbiAgICBjb25zdCB1c2VyQWNjb3VudHMgPSBhbGxBY2NvdW50cy5maWx0ZXIoYWNjb3VudCA9PiB7XG4gICAgICByZXR1cm4gYWNjb3VudC5vd25lciA9PT0gYWNjb3VudEluZm8ub3duZXI7XG4gICAgfSk7XG4gICAgY29uc3QgYWNjb3VudF90eXBlX2V4aXN0cyA9IHJlY29yZEV4aXN0cyh1c2VyQWNjb3VudHMsIGFjY291bnRJbmZvLCAndHlwZScpO1xuXG4gICAgaWYgKGFjY291bnRfdHlwZV9leGlzdHMpIHtcbiAgICAgIHJldHVybiB7IG1lc3NhZ2U6IGBZb3UgYWxyZWFkeSBoYXZlIGEgJHthY2NvdW50SW5mby50eXBlfSBhY2NvdW50YCwgZXJyb3I6IHRydWUsIGNvZGU6IDQwMSB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBhY2NvdW50X251bWJlciA9XG4gICAgICAgIE1hdGgubWF4KC4uLnRoaXMuZ2V0QWxsQWNjb3VudHMoKS5tYXAoYWNjb3VudCA9PiBhY2NvdW50LmFjY291bnROdW1iZXIpKSArIDE7XG4gICAgICAvLyBjb25zb2xlLmxvZygnQWNjb3VudCBudW1iZXInLGFjY291bnRfbnVtYmVyKTtcbiAgICAgIGNvbnN0IHVzZXJTZXJ2aWNlID0gbmV3IFVzZXJTZXJ2aWNlKCk7XG4gICAgICBjb25zdCB1c2VySW5mbyA9IHVzZXJTZXJ2aWNlLmdldFVzZXJJbmZvKGFjY291bnRJbmZvLm93bmVyKTtcbiAgICAgIGlmICghdXNlckluZm8uZXJyb3IpIHtcbiAgICAgICAgY29uc3QgeyBpZCwgZmlyc3ROYW1lLCBsYXN0TmFtZSwgZW1haWwgfSA9IHVzZXJJbmZvLmRhdGE7XG4gICAgICAgIGNvbnN0IG5ld0FjY291bnQgPSB7XG4gICAgICAgICAgaWQ6IG5ld0lkLFxuICAgICAgICAgIGFjY291bnROdW1iZXI6IGFjY291bnRfbnVtYmVyLFxuICAgICAgICAgIHR5cGU6IGFjY291bnRJbmZvLnR5cGUsXG4gICAgICAgICAgb3BlbmluZ0JhbGFuY2U6IHBhcnNlRmxvYXQoJzAuMDAnKSxcbiAgICAgICAgICBjcmVhdGVkT246IG5ldyBEYXRlKCksXG4gICAgICAgICAgb3duZXI6IGlkLFxuICAgICAgICAgIGZpcnN0TmFtZSxcbiAgICAgICAgICBsYXN0TmFtZSxcbiAgICAgICAgICBlbWFpbFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbWVzc2FnZTogJ0FjY291bnQgQ3JlYXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICAgIGVycm9yOiBmYWxzZSxcbiAgICAgICAgICBjb2RlOiAyMDEsXG4gICAgICAgICAgZGF0YTogeyAuLi5uZXdBY2NvdW50IH1cbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbWVzc2FnZTogJ0Vycm9yIENyZWF0aW5nIEFjY291bnQgVXNlciBpbmZvcm1hdGlvbiByZXF1aXJlZCcsXG4gICAgICAgICAgZXJyb3I6IHRydWUsXG4gICAgICAgICAgY29kZTogNDAzXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFjdGl2YXRlcy9EZWFjdHZhdGUgYSBiYW5rIGFjY291bnQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB1c2VySWRcbiAgICogQHBhcmFtIHtvYmplY3R9IHVwZGF0ZVxuICAgKiBAcmV0dXJucyB7b2JqZWN0fVxuICAgKi9cbiAgdXBkYXRlQWNjb3VudFN0YXR1cyh1cGRhdGUsIHVzZXJJZCkge1xuICAgIGNvbnN0IHVzZXJzID0gbmV3IFVzZXJTZXJ2aWNlKCk7XG4gICAgY29uc3QgYWxsVXNlcnMgPSB1c2Vycy5nZXRBbGxVc2VycygpO1xuICAgIGNvbnN0IHZhbGlkVXNlciA9IGFsbFVzZXJzLmZpbHRlcihkYl91c2VyID0+IHtcbiAgICAgIHJldHVybiB1c2VySWQgPT09IGRiX3VzZXIuaWQgJiYgZGJfdXNlci5pc0FkbWluID09PSB0cnVlO1xuICAgIH0pO1xuICAgIGlmICh2YWxpZFVzZXIubGVuZ3RoKSB7XG4gICAgICBjb25zdCBhY2NvdW50VG9VcGRhdGUgPSB0aGlzLmFjY291bnRzLmZpbHRlcihhY2NvdW50ID0+IHtcbiAgICAgICAgcmV0dXJuIGFjY291bnQuYWNjb3VudE51bWJlciA9PT0gcGFyc2VJbnQodXBkYXRlLmFjY291bnROdW1iZXIpO1xuICAgICAgfSk7XG4gICAgICBpZiAoYWNjb3VudFRvVXBkYXRlLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBhbGxvd2VkU3RhdHVzZXMgPSBbJ2RlbGV0ZWQnLCAnZG9ybWFudCcsICdhY3RpdmUnXTtcbiAgICAgICAgaWYgKCFhbGxvd2VkU3RhdHVzZXMuaW5jbHVkZXModXBkYXRlLnN0YXR1cykpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWVzc2FnZTogYFVuaWRlbnRpZmllZCBzdGF0dXMgc3BlY2lmaWVkYCxcbiAgICAgICAgICAgIGVycm9yOiB0cnVlLFxuICAgICAgICAgICAgY29kZTogNDAwXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXBkYXRlLnN0YXR1cyA9PT0gJ2RlbGV0ZWQnKSB7XG4gICAgICAgICAgYWNjb3VudFRvVXBkYXRlWzBdLnN0YXR1cyA9ICdkZWxldGVkJztcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWVzc2FnZTogYEFjY291bnQgZGVsZXRlZCBzdWNjZXNzZnVsbHlgLFxuICAgICAgICAgICAgZXJyb3I6IGZhbHNlLFxuICAgICAgICAgICAgY29kZTogMjAwXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhY2NvdW50VG9VcGRhdGVbMF0uc3RhdHVzID0gYWNjb3VudFRvVXBkYXRlWzBdLnN0YXR1cyA9PT0gJ2FjdGl2ZScgPyAnZG9ybWFudCcgOiAnYWN0aXZlJztcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWVzc2FnZTogYEFjY291bnQgU3RhdHVzIHN1Y2Nlc3NmdWxseSB1cGRhdGVkIHRvICcke2FjY291bnRUb1VwZGF0ZVswXS5zdGF0dXN9J2AsXG4gICAgICAgICAgICBlcnJvcjogZmFsc2UsXG4gICAgICAgICAgICBjb2RlOiAyMDAsXG4gICAgICAgICAgICBkYXRhOiB7IC4uLmFjY291bnRUb1VwZGF0ZVswXSB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBtZXNzYWdlOiBgQWNjb3VudCBudW1iZXIgJHt1cGRhdGUuYWNjb3VudE51bWJlcn0gZG9lcyBub3QgZXhpc3RgLFxuICAgICAgICAgIGVycm9yOiB0cnVlLFxuICAgICAgICAgIGNvZGU6IDQwNFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBtZXNzYWdlOiAnWW91IGFyZSBub3QgYXV0aG9yaXplZCB0byBwZXJmb3JtIHRoaXMgYWN0aW9uLicsXG4gICAgICAgIGVycm9yOiB0cnVlLFxuICAgICAgICBjb2RlOiA0MDNcbiAgICAgIH07XG4gICAgfVxuICB9XG59XG4iXX0=